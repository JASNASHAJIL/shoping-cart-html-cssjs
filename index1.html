<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shopping Cart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .product-card {
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      border-radius: 10px;
      padding: 15px;
      height: 100%;
    }
    .product-img {
      height: 250px;
      width: 100%;
      object-fit: cover;
      border-radius: 8px;
    }

    /* üîÑ Cart Overlay */
    .cart-overlay {
      position: fixed;
      top: 70px;
      right: 20px;
      width: 300px;
      max-height: 80vh;
      overflow-y: auto;
      background-color: #f8f9fa;
      border-radius: 10px;
      padding: 15px;
      z-index: 999;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
      display: none;
    }

    .cart-item {
      border-bottom: 1px solid #ddd;
      padding: 10px 0;
    }

    .total {
      font-weight: bold;
      font-size: 1.2rem;
    }

    .cart-controls button {
      margin: 0 5px;
    }

    .cart-empty {
      color: #888;
    }
  </style>
</head>
<body>

<!-- ‚úÖ Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="#">üõçÔ∏è MyShop</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="#" id="toggleCart">üõí Cart <span class="badge bg-success">0</span></a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- ‚úÖ Search -->
<div class="container mt-5 mb-4">
  <form class="d-flex" role="search" id="searchform">
    <input class="form-control-lg me-2" type="search" placeholder="Search..." aria-label="Search" id="searchinput">
    <button class="btn btn-primary btn-lg" type="submit">Search</button>
  </form>
</div>

<!-- ‚úÖ Main Layout -->
<div class="container">
  <div class="row">
    <!-- Products -->
    <div class="col-lg-12">
      <div class="row g-4">
        <!-- Repeat this for each product -->
        <div class="col-sm-6 col-md-4">
          <div class="product-card h-100">
            <img src="/pexels-photo-8532616.webp" class="product-img mb-2" alt="Product 1">
            <h5>shoue</h5>
            <p>$10</p>
            <button class="btn btn-primary w-100 add-to-cart-btn">Add to Cart</button>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="product-card h-100">
            <img src="/pexels-photo-2529148.webp" class="product-img mb-2" alt="Product 2">
            <h5>watch</h5>
            <p>$15</p>
            <button class="btn btn-primary w-100 add-to-cart-btn">Add to Cart</button>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="product-card h-100">
            <img src="/pexels-photo-1082528.webp" class="product-img mb-2" alt="Product 3">
            <h5>geans</h5>
            <p>$20</p>
            <button class="btn btn-primary w-100 add-to-cart-btn">Add to Cart</button>
          </div>
        </div>

          <div class="col-sm-6 col-md-4 mt-4">
            <div class="product-card h-100">
              <img src="/pexels-photo-701877 (1).webp" class="img-fluid product-img mb-2" alt="Product 2">
              <h5>back bag</h5>
              <p>$15</p>
              <button class="btn btn-primary w-100">Add to Cart</button>
            </div>
          </div>

           <div class="col-sm-6 col-md-4 mt-4">
            <div class="product-card h-100">
              <img src="/pexels-photo-2905238.webp" class="img-fluid product-img mb-2" alt="Product 2">
              <h5>knike</h5>
              <p>$15</p>
              <button class="btn btn-primary w-100">Add to Cart</button>
            </div>
          </div>


           <div class="col-sm-6 col-md-4 mt-4">
            <div class="product-card h-100">
              <img src="/pexels-photo-190819 (1).jpeg" class="img-fluid product-img  mb-2 w-100" alt="Product 2">
              <h5>sun glass</h5>
              <p>$15</p>
              <button class="btn btn-primary w-100">Add to Cart</button>
            </div>
          </div>


      </div>
    </div>
  </div>
</div>

<!-- ‚úÖ Cart Overlay -->
<div class="cart-overlay" id="cartSection">
  <div class="cart"></div>
</div>

<!-- ‚úÖ Script -->
<script>
  // Search functionality
  document.getElementById("searchform").addEventListener("submit", function (e) {
    e.preventDefault();
    const searchValue = document.getElementById("searchinput").value.toLowerCase();
    const productCards = document.querySelectorAll(".product-card");

    if (searchValue.trim() === "") {
      productCards.forEach(card => card.parentElement.style.display = "block");
      return;
    }

    let found = false;
    productCards.forEach(card => {
      const title = card.querySelector("h5").textContent.toLowerCase();
      if (title.includes(searchValue)) {
        card.parentElement.style.display = "block";
        found = true;
      } else {
        card.parentElement.style.display = "none";
      }
    });

    if (!found) alert("No items found.");
  });

  // Cart logic
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  function updateCartUI() {
    const cartContainer = document.querySelector(".cart");
    if (cart.length === 0) {
      cartContainer.innerHTML = `<h5>Your Cart</h5><p class="cart-empty">Cart is empty.</p>`;
      document.querySelector(".badge").textContent = 0;
      return;
    }

    const itemsHTML = cart.map((item, index) => `
      <div class="cart-item d-flex justify-content-between align-items-center">
        <div>
          <strong>${item.name}</strong><br>
          $${item.price} x ${item.quantity} = $${item.price * item.quantity}
        </div>
        <div class="cart-controls">
          <button class="btn btn-sm btn-outline-secondary" onclick="changeQuantity(${index}, -1)">-</button>
          <button class="btn btn-sm btn-outline-secondary" onclick="changeQuantity(${index}, 1)">+</button>
          <button class="btn btn-sm btn-outline-danger" onclick="removeItem(${index})">üóëÔ∏è</button>
        </div>
      </div>
    `).join("");

    const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);

    cartContainer.innerHTML = `
      <h5>Your Cart</h5>
      ${itemsHTML}
      <div class="total d-flex justify-content-between mt-3">
        <span>Total:</span>
        <span>$${total}</span>
      </div>
      <button class="btn btn-success w-100 mt-3">Checkout</button>
    `;

    document.querySelector(".badge").textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
  }

  function addToCart(name, price) {
    const existing = cart.find(item => item.name === name);
    if (existing) {
      existing.quantity += 1;
    } else {
      cart.push({ name, price, quantity: 1 });
    }
    localStorage.setItem("cart", JSON.stringify(cart));
    updateCartUI();
  }

  function changeQuantity(index, delta) {
    cart[index].quantity += delta;
    if (cart[index].quantity <= 0) {
      cart.splice(index, 1);
    }
    localStorage.setItem("cart", JSON.stringify(cart));
    updateCartUI();
  }

  function removeItem(index) {
    cart.splice(index, 1);
    localStorage.setItem("cart", JSON.stringify(cart));
    updateCartUI();
  }

  // Bind add to cart buttons
  document.querySelectorAll(".add-to-cart-btn").forEach(button => {
    button.addEventListener("click", () => {
      const card = button.closest(".product-card");
      const name = card.querySelector("h5").textContent;
      const price = parseFloat(card.querySelector("p").textContent.replace("$", ""));
      addToCart(name, price);
    });
  });

  // Toggle cart overlay
  document.getElementById("toggleCart").addEventListener("click", function () {
    const cartSection = document.getElementById("cartSection");
    cartSection.style.display = cartSection.style.display === "none" ? "block" : "none";
    updateCartUI();
  });

  updateCartUI();
</script>
</body>
</html>
